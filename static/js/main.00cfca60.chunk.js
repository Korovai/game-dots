(this["webpackJsonpgame-dots"]=this["webpackJsonpgame-dots"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/error.02430bb8.png"},,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),o=a.n(s),l=a(1),i=a(4),c=a(3),d=a(8),m=a(11),u=a(9),g=a(12),f=(a(18),function(){return r.a.createElement("div",{className:"wrSpinner"},r.a.createElement("div",{className:"loadingio-spinner-dual-ball-jfpwos7i8vf"},r.a.createElement("div",{className:"ldio-xg2gjvq53mq"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}),y=(a(19),a(10)),p=a.n(y),v=function(){return r.a.createElement("div",{className:"wrErrorIndicator"},r.a.createElement("img",{src:p.a,alt:"Icon Error"}),r.a.createElement("span",{className:"boom"},"Boom!"),r.a.createElement("span",null,"something has gone terribli wrong"),r.a.createElement("span",null,"(but we are already fixing it)"))},h=(a(20),function(e){var t=e.settings,a=e.onOpenSelector,n=e.currentModeName,s=e.onSelectMode,o=e.gameStart,l=e.onGetDataPlayer,i=t.map((function(e){var t=e.id,a=e.mode;return r.a.createElement("li",{key:t,onClick:function(){return s(t)},className:"formSelectListItem jsFormListItem"},a)}));return r.a.createElement("div",{className:"wrHeader"},r.a.createElement("div",{className:"formSelectArrow"},r.a.createElement("div",{className:"jsFormParent"},r.a.createElement("div",{onClick:a,className:"formSelectContent jsFormText"},n),r.a.createElement("ul",{className:"formSelectList jsFormList"},i))),r.a.createElement("div",{className:"wrNameUser"},r.a.createElement("input",{onChange:l,type:"text",className:"nameUser",maxLength:"20",placeholder:"Enter your name"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:o,className:"btnPlay"},"Play")))}),S=(a(21),function(e){var t=e.currentMode,a=t.field,n=t.size,s=e.arrayFields,o=e.onSelectField,l=a,i=n,c=s.map((function(e){var t=e.id,a=e.namesClass;return r.a.createElement("div",{onClick:function(){return o(t)},key:t,className:a,style:{width:"".concat(i,"px"),height:"".concat(i,"px")}})}));return r.a.createElement("div",{className:"wrPlayZone"},r.a.createElement("div",{className:"wrMessage"},r.a.createElement("textarea",{name:"text",className:"message"},"Welcome! Play Game In Dots?")),r.a.createElement("div",{className:"playZone",style:{width:"".concat(l*i+4*l,"px")}},c))}),w=(a(22),function(e){var t=e.winners.map((function(e){var t=e.id,a=e.winner,n=e.date;return r.a.createElement("li",{key:t,className:"leaderListItem"},r.a.createElement("div",{className:"plaerName"},a),r.a.createElement("div",{className:"victoryDate"},n))}));return r.a.createElement("div",{className:"wrResults"},r.a.createElement("div",{className:"resultsTitle"},"Leader Board"),r.a.createElement("ul",{className:"leaderList"},t))}),E=a(2),M=a.n(E),b=a(5),F=function e(){var t=this;Object(c.a)(this,e),this._gameSettings="https://starnavi-frontend-test-task.herokuapp.com/game-settings",this._winnersResults="https://starnavi-frontend-test-task.herokuapp.com/winners",this.getSettings=function(){var e=Object(b.a)(M.a.mark((function e(a){var n,r,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t._gameSettings);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t._gameSettings,", received ").concat(n.status));case 5:return e.next=7,n.json();case 7:return r=e.sent,s=Object.entries(r),e.abrupt("return",s.map(t._transformSettings));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWinners=function(){var e=Object(b.a)(M.a.mark((function e(a){var n,r,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t._winnersResults);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t._winnersResults,", received ").concat(n.status));case 5:return e.next=7,n.json();case 7:return r=e.sent,s=Object.entries(r),e.abrupt("return",s.map(t._transformWinners).slice(s.length-5));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getIdMode=function(e){return"easyMode"===e?1:"normalMode"===e?2:"hardMode"===e?3:"Unknown mode"},this.getFieldSize=function(e){var t=document.documentElement.clientWidth;return t<468?"easyMode"===e?54:"normalMode"===e?25:"hardMode"===e?15:"Unknown mode":t>467&&t<668?"easyMode"===e?80:"normalMode"===e?38:"hardMode"===e?24:"Unknown mode":"easyMode"===e?85:"normalMode"===e?45:"hardMode"===e?30:"Unknown mode"},this.getNameMode=function(e){return"easyMode"===e?"Easy Mode":"normalMode"===e?"Normal Mode":"hardMode"===e?"Hard Mode":"Unknown mode"},this.getCustomDelay=function(e){return"easyMode"===e?800:"normalMode"===e?1e3:"hardMode"===e?1100:"Unknown mode"},this._transformSettings=function(e){return{id:t.getIdMode(e[0]),size:t.getFieldSize(e[0]),mode:t.getNameMode(e[0]),field:e[1].field,delay:t.getCustomDelay(e[0])}},this._transformWinners=function(e){return{id:e[1].id,winner:e[1].winner,date:e[1].date}}},N=(a(24),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).gameService=new F,a.state={settings:[],winners:[],loading:!0,error:!1,currentModeName:"Pick game mode",currentMode:[],arrayFields:[],dataPlayer:"",playerPoints:0,computerPoints:0,start:"",selectedFieldId:null,stop:!1,winnerDate:[]},a.loadingGameSettings=function(){a.gameService.getSettings().then((function(e){a.setState({settings:e,loading:!1})})).catch(a.onError)},a.loadingLeaderBoard=function(){a.gameService.getWinners().then((function(e){a.setState({winners:e,loading:!1})})).catch(a.onError)},a.onError=function(e){a.setState({loading:!1,error:!0})},a.onOpenSelector=function(){document.querySelector(".formSelectList").classList.toggle("isActive")},a.onSelectMode=function(e){for(var t=[],n=a.state.settings[e-1].field,r=a.state.settings[e-1],s=0;s<Math.pow(n,2);s++)t[s]={id:s,namesClass:"gameFiled"};a.setState({currentModeName:a.state.settings[e-1].mode,currentMode:{id:e,size:r.size,mode:r.mode,field:r.field,delay:r.delay},arrayFields:t}),document.querySelector(".formSelectList").classList.remove("isActive")},a.onGetDataPlayer=function(e){a.setState({dataPlayer:e.target.value})},a.dataValidation=function(){var e=0,t=a.state.currentMode,n=a.state.dataPlayer,r=document.querySelector(".message");return 0===n.length?(r.style.color="#e85a5f",r.value="Validation error: Invalid player name"):e++,0===t.length?(r.style.color="#e85a5f",r.value="Validation error: Game mode not selected"):e++,2===e},a.activeElements=function(){document.querySelector(".formSelectContent").style.pointerEvents="auto",document.querySelector(".nameUser").disabled=!1},a.inactiveElements=function(){document.querySelector(".formSelectContent").style.pointerEvents="none",document.querySelector(".nameUser").disabled=!0,document.querySelector(".btnPlay").disabled=!0},a.gameStart=function(){if(a.dataValidation()){var e=document.querySelector(".message");if(!1===a.state.stop)a.setState({start:setInterval(a.randomField,a.state.currentMode.delay)}),e.style.color="#a1a1a1",e.value="Let's go, the game has begun!",a.inactiveElements();else{a.setState({currentModeName:"Pick game mode",currentMode:[],arrayFields:[],dataPlayer:"",playerPoints:0,computerPoints:0,start:"",selectedFieldId:null,stop:!1}),document.querySelector(".nameUser").value="",document.querySelector(".btnPlay").innerHTML="Play",e.value="Will we play again?";for(var t=a.state.arrayFields,n=0;n<t.length;n++)t[n].namesClass="gameFiled";a.activeElements()}}},a.onSelectField=function(e){a.setState({selectedFieldId:e})},a.getWinTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+"; "+e.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]+" "+e.getFullYear()},a.randomField=function(){for(var e=[],t=0,n=a.state.arrayFields,r=0;r<n.length;r++)"gameFiled playField"!==n[r].namesClass&&"gameFiled computerField"!==n[r].namesClass&&(e[t]=n[r],t++);var s=e.length,o=Math.floor(0+Math.random()*(s-1+1-0));a.setState({arrayFields:a.toggleNamesClass(e[o].id)});for(var c=0;c<n.length;){if("gameFiled randomField"===n[c].namesClass)if(n[c].id===a.state.selectedFieldId){var d=n[c],m=Object(i.a)({},d,{namesClass:"gameFiled playField"});a.setState({arrayFields:[].concat(Object(l.a)(n.slice(0,c)),[m],Object(l.a)(n.slice(c+1)))});var u=a.state.playerPoints;u++,a.setState({playerPoints:u})}else{var g=n[c],f=Object(i.a)({},g,{namesClass:"gameFiled computerField"});a.setState({arrayFields:[].concat(Object(l.a)(n.slice(0,c)),[f],Object(l.a)(n.slice(c+1)))});var y=a.state.computerPoints;y++,a.setState({computerPoints:y})}var p=document.querySelector(".message");a.state.playerPoints>Math.floor(a.state.arrayFields.length/2)?(clearInterval(a.state.start),p.style.color="#a1a1a1",p.value="Congratulations, ".concat(a.state.dataPlayer,", you won!"),document.querySelector(".btnPlay").innerHTML="Restart",document.querySelector(".btnPlay").disabled=!1,a.setState({stop:!0}),a.setState({winnerDate:{winner:a.state.dataPlayer,date:a.getWinTime()}}),a.setDate(a.state.winnerDate),c=n.length+1):a.state.computerPoints>Math.floor(a.state.arrayFields.length/2)&&(clearInterval(a.state.start),p.style.color="#a1a1a1",p.value="Computer won!",document.querySelector(".btnPlay").innerHTML="Restart",document.querySelector(".btnPlay").disabled=!1,a.setState({stop:!0}),a.setState({winnerDate:{winner:"Computer",date:a.getWinTime()}}),a.setDate(a.state.winnerDate),c=n.length+1),c++}},a.setDate=function(e){fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log("Congratulations, data sent successfully")})).catch((function(e){return console.error(e)}))},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadingGameSettings(),this.loadingLeaderBoard()}},{key:"toggleNamesClass",value:function(e){for(var t=this.state.arrayFields,a=0;a<t.length;a++)if(t[a].id===e){var n=t[a],r=Object(i.a)({},n,{namesClass:"gameFiled randomField"});return[].concat(Object(l.a)(t.slice(0,a)),[r],Object(l.a)(t.slice(a+1)))}}},{key:"render",value:function(){var e=this.state,t=e.settings,a=e.winners,n=e.loading,s=e.error,o=e.currentModeName,l=e.currentMode,i=e.arrayFields,c=r.a.createElement("div",{className:"wrApp"},r.a.createElement("div",{className:"wrAppCol1"},r.a.createElement(h,{settings:t,onOpenSelector:this.onOpenSelector,currentModeName:o,onSelectMode:this.onSelectMode,gameStart:this.gameStart,onGetDataPlayer:this.onGetDataPlayer}),r.a.createElement(S,{currentMode:l,arrayFields:i,onSelectField:this.onSelectField})),r.a.createElement("div",{className:"wrAppCol2"},r.a.createElement(w,{winners:a}))),d=n?r.a.createElement(f,null):null,m=s?r.a.createElement(v,null):null,u=n||s?null:c;return r.a.createElement(r.a.Fragment,null,d,m,u)}}]),t}(n.Component));o.a.render(r.a.createElement(N,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.00cfca60.chunk.js.map